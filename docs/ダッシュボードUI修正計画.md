# ダッシュボードUI修正計画書

## 📋 概要
現在のダッシュボード実装を、提供された参考HTMLデザインに合わせて全面的に修正する計画書です。

## 🔍 現状分析

### 現在の実装
- **レイアウト**: 縦方向フレックス、イベント一覧のみ
- **スタイル**: 白背景のシンプルなデザイン
- **機能**: 基本的なイベント表示とモーダル
- **地図**: なし

### 希望デザイン（参考HTML）
- **レイアウト**: 2/3（上部イベント一覧）+ 1/3（下部地図）の固定分割
- **スタイル**: スマートフォンモックアップ風（414px × 896px）、ダークグレー背景
- **機能**: 2段階クリック、地図連動、動的ピン表示
- **地図**: Google Maps埋め込み + 動的ピン

## 🎯 修正目標
1. スマートフォンアプリ風の洗練されたデザイン
2. イベントカードと地図の連動機能
3. 直感的なユーザーインタラクション
4. レスポンシブ対応

## 📝 詳細修正計画

### Phase 1: レイアウト構造の変更
**目標**: 2/3 + 1/3の固定分割レイアウトの実装

#### 1.1 Dashboard.tsx の構造変更
- [ ] 地図セクション（map-section）の追加
- [ ] 2/3（events-section）+ 1/3（map-section）の固定分割実装
- [ ] Google Maps埋め込み用のiframe追加
- [ ] 地図上の動的ピン表示用コンテナ追加

#### 1.2 Google Maps統合
- [ ] Google Maps Embed API の設定
- [ ] 佐渡島中心（38.0195, 138.2570）、ズーム10の固定表示
- [ ] 動的ピン表示機能の実装

### Phase 2: スタイリングの全面更新
**目標**: スマートフォンモックアップ風デザインの実装

#### 2.1 Dashboard.scss の全面書き換え
- [ ] スマートフォンモックアップ（414px × 896px）の実装
- [ ] ダークグレー背景（#333333）の適用
- [ ] 中央配置レイアウトの実装
- [ ] カード一覧背景色（#f0f4f8）の適用

#### 2.2 カードグリッドレイアウト
- [ ] 2列グリッドレイアウトの実装
- [ ] カード間のギャップ（1rem）設定
- [ ] スクロール可能エリアの設定

#### 2.3 カードデザインの更新
- [ ] 白背景、角丸（1rem）の実装
- [ ] ボックスシャドウ（0 4px 6px rgba(0, 0, 0, 0.1)）
- [ ] ホバーエフェクト（上に5px移動）
- [ ] 固定高さ画像（100px）の実装

### Phase 3: インタラクション機能の追加
**目標**: 2段階クリック機能と地図連動の実装

#### 3.1 2段階クリック機能
- [ ] 1回目クリック: 地図更新 + カード選択状態
- [ ] 2回目クリック（同じカード）: モーダル表示
- [ ] 別カードクリック: 地図更新 + 選択状態変更

#### 3.2 地図連動機能
- [ ] カード選択時の地図ピン表示
- [ ] 座標計算ロジックの実装
- [ ] ピンスタイル（赤色、白枠、ドロップシャドウ）

#### 3.3 状態管理の強化
- [ ] 最後にクリックされたカードIDの管理
- [ ] 地図ピン表示状態の管理
- [ ] カード選択状態の視覚的フィードバック

### Phase 4: EventCardコンポーネントの更新
**目標**: 新デザインに対応したカードコンポーネント

#### 4.1 カードレイアウトの調整
- [ ] 画像の固定高さ（100px）設定
- [ ] ステータスバッジの追加
- [ ] カード内要素の配置調整

#### 4.2 スタイルの統一
- [ ] EventCard.scss の更新
- [ ] 新しいデザインシステムに合わせた調整
- [ ] ホバー状態の実装

### Phase 5: レスポンシブ対応
**目標**: 様々な画面サイズでの適切な表示

#### 5.1 ブレークポイントの設定
- [ ] モバイル（〜767px）: 基本レイアウト
- [ ] タブレット（768px〜1023px）: 調整版
- [ ] デスクトップ（1024px〜）: 拡張版

#### 5.2 各画面サイズでの最適化
- [ ] カードグリッドの列数調整
- [ ] 地図エリアの高さ調整
- [ ] フォントサイズとスペーシングの調整

## 🔧 技術的考慮事項

### Google Maps API
- 既存のAPIキー: `AIzaSyB4VEihrycQJKeszHDh3Epy1rFVHpaT_70`
- Embed API使用（iframe方式）
- 動的ピン表示は絶対位置指定で実装

### パフォーマンス
- 地図の遅延読み込み（loading="lazy"）
- カードのホバーエフェクトはCSS transformで実装
- 不要な再レンダリングの防止

### アクセシビリティ
- キーボードナビゲーション対応
- ARIA属性の適切な設定
- カラーコントラストの確保

## 📊 実装優先度

| 優先度 | フェーズ | 内容 | 期待効果 |
|--------|----------|------|----------|
| 🔴 高 | Phase 1 | レイアウト構造変更 | 基本機能の実現 |
| 🔴 高 | Phase 2 | スタイリング更新 | 視覚的改善 |
| 🟡 中 | Phase 3 | インタラクション機能 | UX向上 |
| 🟡 中 | Phase 4 | EventCard更新 | 統一感の向上 |
| 🟢 低 | Phase 5 | レスポンシブ対応 | 汎用性向上 |

## ✅ 完了基準

### 各フェーズの完了基準
1. **Phase 1**: 地図が表示され、2/3 + 1/3レイアウトが機能
2. **Phase 2**: スマートフォンモックアップ風デザインが適用
3. **Phase 3**: カードクリックで地図にピンが表示
4. **Phase 4**: 統一されたカードデザインが適用
5. **Phase 5**: 各画面サイズで適切に表示

### 最終完了基準
- [ ] TypeScriptエラーなし（`npx tsc --noEmit`）
- [ ] ESLintエラーなし（`npx eslint src --ext .ts,.tsx`）
- [ ] プレビューで期待通りの表示確認
- [ ] 全インタラクション機能の動作確認

## 🚨 注意事項

### 既存機能の保持
- イベントデータの表示機能
- モーダル表示機能
- イベントフィルタリング機能

### 破壊的変更の回避
- 既存のpropsインターフェースの維持
- 他コンポーネントとの互換性確保
- データフローの変更最小化

## 📅 実装スケジュール

1. **Phase 1-2**: レイアウト・スタイリング（優先実装）
2. **Phase 3**: インタラクション機能（中期実装）
3. **Phase 4-5**: 細部調整・レスポンシブ（最終調整）

---

**作成日**: 2025-01-25  
**最終更新**: 2025-01-25  
**ステータス**: 実装準備完了