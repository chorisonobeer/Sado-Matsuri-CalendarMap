# 佐渡祭りカレンダー CSV 配列（フィールド）構造

このドキュメントは、`docs/佐渡祭りカレンダーデータベース.csv` のヘッダー（列名）と意味、型、ならびにアプリ内型 `Pwamap.FestivalData` との対応関係を記録します。パーサ実装時は「列位置」ではなく「列名（タイトル）」で取得してください。

最終更新: 2025-09-17

---

## 1) CSV ヘッダー一覧（順序そのまま）

1. ID — string（識別子）
2. お祭り名 — string（名称）
3. 簡単な説明 — string（サマリー）
4. 開催場所名 — string（会場の名称）
5. 住所 — string（会場の住所）
6. 緯度 — number（十進度）
7. 経度 — number（十進度）
8. 開始日 — string（YYYY-MM-DD）
9. 終了日 — string（YYYY-MM-DD）
10. 開始時刻 — string（HH:mm）
11. 終了時刻 — string（HH:mm）
12. 無料か有料か — boolean もしくは string（例: TRUE/FALSE, "無料"/"有料"）
13. 駐車場の有無 — boolean もしくは string（例: TRUE/FALSE）
14. 飲食店出店の有無 — boolean もしくは string（例: TRUE/FALSE）
15. 上位カテゴリ — string（例: 花火, 伝統芸能, 食, 歴史, 自然, 音楽 など）
16. 詳細タグ — string（カンマ区切り: 例 "夏祭り,花火"）
17. 規模感 — number もしくは string（例: 1〜5）
18. 開催ステータス — string（例: 開催予定/中止/休止/廃止/過去の開催）
19. 写真URL1 — string（URL）
20. 写真URL2 — string（URL）
21. 写真URL3 — string（URL）
22. 写真URL4 — string（URL）
23. 写真URL5 — string（URL）
24. 公式サイトURL — string（URL）
25. 見どころ — string（ハイライト）
26. アクセス方法 — string（アクセス案内）

---

## 2) サンプル JSON オブジェクト（列名キーで保持する場合の推奨形）

```json
{
  "ID": "1",
  "お祭り名": "両津花火大会",
  "簡単な説明": "夏の夜空を彩る佐渡最大の水中花火。出店も多数あり賑わいます。",
  "開催場所名": "両津湾",
  "住所": "新潟県佐渡市両津湊",
  "緯度": 38.0805,
  "経度": 138.4503,
  "開始日": "2025-08-15",
  "終了日": "2025-08-15",
  "開始時刻": "19:30",
  "終了時刻": "21:00",
  "無料か有料か": "TRUE",
  "駐車場の有無": "TRUE",
  "飲食店出店の有無": "TRUE",
  "上位カテゴリ": "花火",
  "詳細タグ": "夏祭り,花火",
  "規模感": 5,
  "開催ステータス": "開催予定",
  "写真URL1": "https://...",
  "写真URL2": "https://...",
  "写真URL3": "",
  "写真URL4": "",
  "写真URL5": "",
  "公式サイトURL": "https://...",
  "見どころ": "水中花火の迫力は圧巻です。",
  "アクセス方法": "両津港から徒歩5分"
}
```

---

## 3) `Pwamap.FestivalData` との対応（現行コード準拠）

アプリ内部では `src/types.d.ts` に定義された `Pwamap.FestivalData` を使用します。現時点の主な対応は以下の通りです。

- ID → ID (string)
- お祭り名 → お祭り名 (string)
- 開催場所名 → 開催場所名 (string)
- 緯度 → 緯度 (string: 互換のため文字列で保持)
- 経度 → 経度 (string: 互換のため文字列で保持)
- 開始日 → 開始日 (string)
- 終了日 → 終了日 (string)
- 無料か有料か → 無料か有料か (string)
- 駐車場の有無 → 駐車場の有無 (string)
- 上位カテゴリ → 上位カテゴリ (string)
- 規模感 → 規模感 (string)
- 開催ステータス → 開催ステータス (string)
- 写真URL1..5 → 写真URL1..5 (string)
- 公式サイトURL → 公式サイトURL (string)

備考:
- CSV の「詳細タグ」はカンマ区切りの単一列ですが、`FestivalData` では `詳細タグ1..8` の複数フィールドとして保持する設計になっています。パース時に分割し、最大 8 個まで順に格納する運用を想定しています（9 個以上は要件次第）。
- 以下の CSV 列は現行 `FestivalData` には未定義です: 「簡単な説明」「住所」「開始時刻」「終了時刻」「飲食店出店の有無」「見どころ」「アクセス方法」。必要に応じて `FestivalData` 拡張、もしくは派生 ViewModel 側で保持してください。

---

## 4) パース実装ガイド（タイトル基準）

- ヘッダー名で列を解決し、列順に依存しないこと。
- 想定外の追加列は無視（もしくは `unknownFields` に退避）し、既存列が欠落していても安全に動作するよう default 値を設定。
- 「詳細タグ」は `","` で split → trim → 空要素除去 → 上限 8 件で `詳細タグ1..8` に展開。
- 緯度・経度は内部型が string のため、文字列化して保持（地図計算時のみ数値化）。
- 真偽値系（無料か有料か/駐車場の有無/飲食店出店の有無）は、`TRUE/FALSE`/`true/false`/`はい/いいえ` など表記ゆれを許容しつつ、内部統一表現へ正規化することを推奨。

---

## 5) 将来の拡張候補（要検討）

- `FestivalData` に「簡単な説明」「住所」「開始/終了時刻」「飲食店出店の有無」「見どころ」「アクセス方法」を追加し、UI で活用。
- 「詳細タグ」は配列 `詳細タグ: string[]` として保持し、保存時に CSV へ join（互換層で `詳細タグ1..8` も許可）。
- 緯度・経度の内部型を number へ寄せ、Map 周辺の互換層のみで文字列化。

---

このファイルは仕様の単一情報源（SSOT）として運用します。変更時は本書を必ず更新してください。