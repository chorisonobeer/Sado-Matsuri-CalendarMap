# 佐渡ヶ島お祭りアプリ - ダッシュボード要件定義書

## 1. 概要

本ドキュメントは、佐渡ヶ島のお祭り情報をスマートフォン向けに表示するアプリケーションのダッシュボード機能について、その要件を定義する。ユーザーはイベントを一覧で確認し、地図上で位置を把握、詳細情報をモーダルで確認できる。

## 2. 画面構成

画面は縦長で、以下の2つの主要な領域で構成される。

### イベント一覧 (上部 2/3)
- 佐渡ヶ島内で開催されるお祭りイベントのカードリスト
- 2列のグリッド形式でカードを配置する
- 縦スクロールが可能

### 地図表示 (下部 1/3)
- 佐渡ヶ島全体を俯瞰するGoogle Maps JavaScript APIによる地図
- イベント一覧とは独立しており、スクロールはできない

## 3. UI要素と機能

### 3.1. イベントカード

#### 表示内容
- イベントの代表画像
- イベント名
- 開催日 (月日のみ)
- 開催場所名

#### クリック時の動作
- **1回目のタップ**: 地図上に該当イベントのピンをDROP動画効果付きで表示する。地図のズームレベルは変更しない。
- **2回目のタップ**: イベント詳細モーダルを開く。

### 3.2. 地図表示

#### 初期表示
- 佐渡ヶ島全体 (center: {lat: 38.0195, lng: 138.2570}, zoom: 10) を表示する

#### イベントピン
- イベントカードがタップされた際に、Google Maps JavaScript APIのMarkerクラスを使用してピンを表示する
- ピンは`google.maps.Animation.DROP`効果付きで表示される（上から落下するアニメーション）
- 同時に表示されるピンは1つのみ。新しいピンが表示されると、以前のピンは削除される
- ピンの色は標準の赤色マーカーを使用

### 3.3. イベント詳細モーダル

#### 表示トリガー
- イベントカードを2回続けてタップした際に表示される

#### 表示内容
- イベント画像
- イベント名
- イベント概要
- 場所 (名称と住所)
- 日時 (開始日、終了日、開始時刻、終了時刻)
- 料金情報 (無料/有料)
- 駐車場情報 (あり/なし)
- ハイライト情報
- アクセス情報
- 公式サイトへのリンクボタン

#### 閉じる
- モーダル右上の × ボタンで閉じることができる

## 4. データソース

CSVファイルから取得されるイベントデータを使用する。以下のフィールドを活用：

- ID
- お祭り名
- 簡単な説明
- 開催場所名
- 住所
- 緯度・経度
- 開始日・終了日
- 開始時刻・終了時刻
- 無料か有料か
- 駐車場の有無
- 上位カテゴリ
- 規模感
- 開催ステータス
- 写真URL1-5
- 公式サイトURL
- 見どころ
- アクセス方法

## 5. 技術要件

- モバイルファーストのレスポンシブデザイン
- Google Maps JavaScript API の活用
  - API密钥は環境変数 `REACT_APP_GOOGLE_MAPS_API_KEY` で管理
  - Markerクラスを使用したピン表示
  - DROP動画効果の実装
- React + TypeScript での実装
- CSVデータの動的読み込み
- モーダル表示機能
- タップイベントの適切な処理（1回目・2回目の区別）

## 6. 実装仕様

### 6.1. Google Maps JavaScript API 実装詳細

#### 地図初期化
```typescript
const mapOptions = {
  center: { lat: 38.0195, lng: 138.2570 },
  zoom: 10,
  disableDefaultUI: true,
  gestureHandling: 'cooperative'
};
```

#### マーカー表示
```typescript
const marker = new google.maps.Marker({
  position: { lat: eventLat, lng: eventLng },
  map: map,
  animation: google.maps.Animation.DROP,
  title: eventName
});
```

### 6.2. コンポーネント構成

- `Dashboard.tsx`: メインダッシュボードコンポーネント
- `EventCard.tsx`: イベントカード表示コンポーネント
- `MapView.tsx`: Google Maps表示コンポーネント
- `EventModal.tsx`: イベント詳細モーダルコンポーネント

### 6.3. 状態管理

- 選択されたイベントの管理
- マーカーの表示/非表示制御
- モーダルの開閉状態
- CSVデータの読み込み状態