# 佐渡ヶ島お祭り案内アプリ 要件定義書（最終版）

## 1. アプリ概要

佐渡ヶ島のお祭りを案内するモバイルファーストのWebアプリケーション。主なターゲットは佐渡への観光客や島民で、直感的なUIでイベント情報を検索・閲覧できることを目的とする。

## 2. ペルソナ

### ペルソナ1: 佐渡に初めて来た25歳のカップル
- **人物像**: 普段からInstagramやTikTokで情報を集めている。旅行は「映える」写真や美味しいものが大事。
- **行動パターン**: 空港や宿に到着後、手持ち無沙汰なタイミングでアプリを起動し、「今日、近くで何かイベントやってないかな？」と探す。
- **検索キーワード**: #花火、#グルメ、#出店、#デート、#夜景

### ペルソナ2: 佐渡在住40歳の独身女性
- **人物像**: 地元のコミュニティを大切にし、伝統文化や歴史に興味がある。
- **行動パターン**: 週末の予定を立てるため、アプリを起動し、特定のジャンルや地域のイベントを探す。
- **検索キーワード**: #鬼太鼓、#伝統芸能、#手仕事、地名（例：両津、相川）

## 3. 主要UXデザイン

### ダッシュボード
- **初期表示**: アプリ起動時に表示されるトップ画面
- **表示内容**: 「直近で開催予定のイベント」をカード形式で一覧表示する。この初期表示は、フィルターの初期値としても機能する
- **UX**: ユーザーの自然な行動（「今日・今週末何がある？」）に沿ったデザイン

### ハイブリッド・ビュー（地図＋リスト）
- **UI**: ユーザーは地図とリストをシームレスに切り替える
- **地図モード**: 佐渡島の地図上にピンでイベントの位置を表示。地図をパン・ズームすると、表示範囲内のピンが動的に増減する
- **リストモード**: イベント情報をカード形式で縦に一覧表示
- **切り替え**: 画面下部に固定されたタブバーで地図とリストを切り替える
- **フィルター**: 画面上部に検索ボックスと横スクロール可能なタグフィルターを配置。**初期表示は「直近で開催予定の祭り」**であり、フィルターを操作することで表示内容が変わる

### カレンダー・ビュー
- **UI**: GoogleカレンダーやAppleカレンダーに倣った、シンプルで使い慣れたUI
- **表示切り替え**: 画面上部のタブで「日」「週」「月」を切り替える（現時点では「月」のみ動作）
- **イベント表示**: 
  - 複数日にまたがるイベントは、日付マスをまたぐ棒で表示
  - 1日に複数のイベントがある場合は、最初の2件をイベント名で表示し、それ以上は「+N件」と表示して簡潔にまとめる
- **フィルター**: タグフィルターでカレンダーの表示イベントを絞り込める
- **詳細表示**: 日付マスをタップすると、下部からその日のイベント一覧がモーダルでスライドアップ表示される

## 4. 機能要件

### データソース
Googleスプレッドシートを使用。管理者のみが書き換え可能。ユーザーはGoogleフォームから情報を提供し、管理者が精査した上でスプレッドシートに反映する。

### データ
お祭りの基本情報（名称、日時、場所、説明、タグ）、および祭り規模や実績による重み付けデータを扱う。

### 検索・フィルター
ユーザーはキーワード検索やタグによるフィルターでイベントを絞り込める。

### イベントの並び順
以下のロジックで重み付けを決定し、重要度順に表示する：
1. **日付**: 開催日の近い順を優先する
2. **重み付け**: 祭りの規模や来場者数など、管理者が設定する項目で重み付けを決定する
3. **同条件の場合**: 日付と重み付けが同じ場合は、名称または住所のあいうえお順で表示する

### ユーザーフィードバック
アプリ内にGoogleフォームへのリンクを設置し、ユーザーが外部フォームから情報提供やフィードバックを行えるようにする。

### ローディング・エラー
- **ローディング表示**: 明示的なローディングアニメーションは不要。データがない状態でも、白地図や「現在読み込み中」を示すデザインで、ユーザーに状況を伝える
- **エラー表示**: ネットワークエラーなどでデータが取得できなかった場合は、モーダルでエラーメッセージを表示する
- **データ更新**: サーバー側で自動的にデータが更新されるため、クライアント側で能動的に更新を促す機能は設けない
- **データ不足時の表示**: 情報が不完全なイベントは、「情報募集中」と表示する

## 5. デザイン仕様

### 原則
モバイルファースト。画面幅を基準とした相対的なレイアウトを基本とする。

### UI要素の配置
- **ヘッダー**: 検索ボックスとタグフィルターを画面上部に配置。タグフィルターは横スクロール可能なカルーセルとする
- **タブバー**: 画面下部に固定されたタブバーで画面を切り替える

### スタイル
- **カラー**: 全体的に柔らかい色合い（例：#f0f4f8）と、アクセントカラー（例：#4338ca）を使用
- **フォント**: Interを使用
- **UI要素**: すべてのUI要素は角を丸くする
- **ロゴ・タイトル**: 「佐渡ヶ島お祭り案内」といった具体的なロゴやタイトルは使用しない